<!DOCTYPE html>
<html lang="en"
      xmlns:th="http://www.thymeleaf.org"
      xmlns:sec="http://www.thymeleaf.org/extras/spring-security">
<head>
    <meta charset="UTF-8">
    <title>Cart</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.3.1/dist/css/bootstrap.min.css" integrity="sha384-ggOyR0iXCbMQv3Xipma34MD+dH/1fQ784/j6cY/iJTQUOhcWr7x9JvoRxT2MZw1T" crossorigin="anonymous">
</head>

<body>
<div th:fragment="nav">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
        <a class="navbar-brand text-success" href="/">E-leaf</a>
        <div class="collapse navbar-collapse justify-content-end">
            <div sec:authorize="isAuthenticated()" class="d-flex align-items-center me-3">
                <span class="me-3 text-dark">
                    Logged in as <strong><span class="m-1" sec:authentication="principal.username"></span></strong>
                </span>
                <form action="#" th:action="@{/logout}" method="POST">
                    <input class="btn btn-outline-success" type="submit" value="Logout" />
                </form>
            </div>
        </div>
    </nav>
</div>

<h1 class="welcome-h1">Your Cart</h1>
<div class="cart-wrapper">
    <div th:each="cartItem : ${products}">
    <h5 class="card-title" th:text="${cartItem.product.name}">Product Name</h5>
    <h6 class="card-subtitle mb-2 text-muted" th:text="${cartItem.product.category}">Category</h6>
    <p class="card-text">
        <strong>Price:</strong> <span th:text="${cartItem.product.price}"></span><br>
        <strong>In stock:</strong> <span th:text="${cartItem.product.quantityInStock}"></span><br>
        <strong>Description:<br></strong> <span th:text="${cartItem.product.description}"></span>
    </p>
    <div class="d-inline" style="margin: 0 auto;">
        <a th:href="@{/products/{id}(id=${cartItem.product.id})}" class="btn btn-primary">View Details</a>
    </div>
        <p>CartItem ID: <span th:text="${cartItem.id}"></span></p>
    </div>
</div>


<div class="d-flex justify-content-center">
    <a class="btn btn-primary" th:href="@{/products}">Products</a>
</div>
</body>
</html>
